{"version":3,"sources":["logo.svg","api/kerfuffle.js","pages/application/spacer.js","pages/application/JSONBlock.js","pages/application/panels.js","pages/application/index.js","pages/dashboard/index.js","App.js","reportWebVitals.js","index.js"],"names":["v1","APIGenerator","handler","get","object","prop","Object","keys","includes","parameter","paths","substr","urls","toString","this","join","param","p","push","Proxy","window","location","host","origin","api","a","axios","application","response","data","id","$application","installData","console","log","post","patch","hold","reload","shutdown","startup","delete","provision","log_type","from","$provision","$output","Spacer","height","style","JSONBlock","fontFamily","fontSize","text","JSON","stringify","language","showLineNumbers","theme","github","MessageContent","header","display","flexDirection","CloudflarePanel","app","cfs","ProxiesPanel","proxies","ProvisionsPanel","values","provisions","map","prov","toUpperCase","LogDisplayModal","app_id","close","useState","setLog","setFrom","interval","useRef","useEffect","current","setInterval","_self","getLog","then","result","next","content","clearInterval","visible","onHide","whiteSpace","width","mode","dracula","OverviewPanel","toast","logModal","setLogModal","loading","setLoading","holdApp","holdApplication","v","show","severity","summary","detail","life","catch","e","lastLog","status_log","menu_log_stdout","menu_log_stderr","closeModal","processStatus","entries","processes","key","value","renderLogMenuItems","logType","label","command","className","ref","target","href","install_configuration","repository","branch","bootstrap","meta","name","root_path","field","fontWeight","body","alive","status","opposite","item","reason","Date","at","toGMTString","booting","running","failed","crashed","unknown","flag","maintenance_mode","onClick","reloadApplication","error","finally","shutdownApplication","startupApplication","deleteApplication","align","model","popup","icon","event","toggle","aria-controls","aria-haspopup","last_commit","Application","appId","useParams","setApp","nonce","setNonce","messageRef","breadItems","setBreadItems","interv","pulldata","getApplication","sticky","home","url","Math","random","Dashboard","path","AppListView","addRepo","setAddRepo","applications","setApplications","setError","empty","setEmpty","boostrap","install","setInstall","index","setIndex","installing","setInstalling","getApplications","err","closeFunc","deploy","deployApplication","r","debug","footer","autoFocus","disabled","htmlFor","onInput","aria-describedby","AppViewItem","hasError","to","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.85c002a2.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","/*\r\n * Copyright (c) 2021 @nokusukun.\r\n * This file is part of Kerfuffle which is released under Apache.\r\n * See file LICENSE or go to https://github.com/nokusukun/kerfuffle/blob/master/LICENSE for full license details.\r\n */\r\n\r\nimport axios from \"axios\";\r\n\r\nconst API_URL = window.location.host === \"localhost:3000\" ? \"http://localhost:8080\" : window.location.origin\r\nconst v1 = APIGenerator(API_URL).api.v1\r\n\r\nfunction _sleep(ms) {\r\n  return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport async function getApplications() {\r\n  const response = await axios.get(v1.application)\r\n  return response.data\r\n}\r\n\r\nexport async function getApplication(id) {\r\n  const response = await axios.get(v1.$application(id))\r\n  return response.data\r\n}\r\n\r\nexport async function deployApplication(installData) {\r\n  console.log(\"Posting\", v1.application, installData)\r\n  const response = await axios.post(v1.application, installData)\r\n  return response.data\r\n}\r\n\r\nexport async function holdApplication(id) {\r\n  const response = await axios.patch(v1.$application(id).hold)\r\n  return response.data\r\n}\r\n\r\nexport async function reloadApplication(id) {\r\n  const response = await axios.patch(v1.$application(id).reload)\r\n  return response.data\r\n}\r\n\r\nexport async function shutdownApplication(id) {\r\n  const response = await axios.patch(v1.$application(id).shutdown)\r\n  return response.data\r\n}\r\n\r\nexport async function startupApplication(id) {\r\n  const response = await axios.patch(v1.$application(id).startup)\r\n  return response.data\r\n}\r\n\r\nexport async function deleteApplication(id) {\r\n  const response = await axios.delete(v1.$application(id))\r\n  return response.data\r\n}\r\n\r\nexport async function getLog(id, provision, log_type, from) {\r\n  const response = await axios.get(v1.$application(id).$provision(provision).$output(log_type).toString() + `?from=${from}`)\r\n  return response.data\r\n}\r\n\r\n\r\nfunction APIGenerator(...urls) {\r\n  const handler = {\r\n    get: function (object, prop) {\r\n      if (!Object.keys(object).includes(prop)) {\r\n        if (prop[0] === \"$\") {\r\n          return (parameter) => {\r\n            return APIGenerator(...object.paths, prop.substr(1), parameter)\r\n          }\r\n        }\r\n        return APIGenerator(...object.paths, prop)\r\n      }\r\n      return object[prop]\r\n    }\r\n  }\r\n  const paths = {\r\n    paths: urls,\r\n    toString: function () {\r\n      return this.paths.join(\"/\")\r\n    },\r\n    param: function (p) {\r\n      this.paths.push(p)\r\n      return this\r\n    }\r\n  }\r\n\r\n  return new Proxy(paths, handler)\r\n}\r\n","export const Spacer = ({height}) => {\r\n  return (<div style={{height: height || \"1em\"}}/>)\r\n}","import {CodeBlock, github} from \"react-code-blocks\";\r\n\r\nexport const JSONBlock = ({object}) => {\r\n  return (\r\n    <div style={{fontFamily: \"'IBM Plex Mono'\", fontSize: \"0.8em\"}}>\r\n      <CodeBlock\r\n        text={JSON.stringify(object, null, 2)}\r\n        language={\"json\"}\r\n        showLineNumbers={false}\r\n        theme={github}\r\n      />\r\n    </div>\r\n  );\r\n}","import {useEffect, useRef, useState} from \"react\";\r\nimport {\r\n  deleteApplication,\r\n  getLog,\r\n  holdApplication,\r\n  reloadApplication,\r\n  shutdownApplication,\r\n  startupApplication\r\n} from \"../../api/kerfuffle\";\r\nimport {Dialog} from \"primereact/dialog\";\r\nimport {ProgressBar} from \"primereact/progressbar\";\r\nimport {CodeBlock, dracula} from \"react-code-blocks\";\r\nimport {Toast} from \"primereact/toast\";\r\nimport {Panel} from \"primereact/panel\";\r\nimport {Spacer} from \"./spacer\";\r\nimport {DataTable} from \"primereact/datatable\";\r\nimport {Column} from \"primereact/column\";\r\nimport {Tag} from \"primereact/tag\";\r\nimport {Timeline} from \"primereact/timeline\";\r\nimport {Message} from \"primereact/message\";\r\nimport {Button} from \"primereact/button\";\r\nimport {Divider} from \"primereact/divider\";\r\nimport {Menu} from \"primereact/menu\";\r\nimport {JSONBlock} from \"./JSONBlock\";\r\n\r\nexport const MessageContent = ({header, data}) => {\r\n  return (\r\n    <div style={{display: 'flex', flexDirection: 'column'}}>\r\n      <h4>{header}</h4>\r\n      <p>\r\n        <code>\r\n          {data}\r\n        </code>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport function CloudflarePanel({app}) {\r\n\r\n  return <div>\r\n    <JSONBlock object={app.cfs}/>\r\n  </div>\r\n}\r\n\r\nexport function ProxiesPanel({app}) {\r\n\r\n  return <div>\r\n    <JSONBlock object={app.proxies}/>\r\n  </div>\r\n}\r\n\r\nexport function ProvisionsPanel({app}) {\r\n\r\n  return <div>\r\n    {Object.values(app.provisions).map(prov =>\r\n      <>\r\n        <Spacer height={\"1em\"}/>\r\n        <Panel header={prov.id.toString().toUpperCase()}>\r\n          <JSONBlock object={prov}/>\r\n        </Panel>\r\n      </>\r\n    )}\r\n  </div>\r\n}\r\n\r\nfunction LogDisplayModal({app_id, provision, log_type, close}) {\r\n  const [log, setLog] = useState(\"\")\r\n  const [from, setFrom] = useState(0)\r\n  const interval = useRef(null)\r\n\r\n  console.log(app_id, provision, log_type, from)\r\n\r\n  useEffect(() => {\r\n    console.log(app_id, provision, log_type, from)\r\n\r\n    interval.current = setInterval(function _self() {\r\n      getLog(app_id, provision, log_type, from).then(result => {\r\n        setFrom(result.next)\r\n        setLog(log + result.content)\r\n      })\r\n      return _self\r\n    }(), 1000)\r\n\r\n    return () => {\r\n      setLog(\"\")\r\n      setFrom(0)\r\n      clearInterval(interval.current)\r\n    }\r\n  }, [app_id, provision, log_type])\r\n\r\n\r\n  return <Dialog\r\n    header={`'${log_type}' Output View: ${provision}`}\r\n    visible={true}\r\n    onHide={close}\r\n    style={{whiteSpace: \"pre-line\", fontFamily: \"'IBM Plex mono'\", fontSize: \"0.8em\", width: \"50vw\"}}>\r\n    {!log && <ProgressBar mode=\"indeterminate\"/>}\r\n    <CodeBlock\r\n      text={log}\r\n      showLineNumbers={false}\r\n      theme={dracula}\r\n    />\r\n  </Dialog>\r\n}\r\n\r\nexport function OverviewPanel({app, reload}) {\r\n  const toast = useRef(null);\r\n  const [logModal, setLogModal] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const holdApp = () => {\r\n    holdApplication(app.application.id).then(v => {\r\n      toast.current.show({severity: 'info', summary: 'Success', detail: 'Toggled maintenance mode', life: 3000})\r\n      reload && reload()\r\n    }).catch(e => {\r\n      toast.current.show({\r\n        severity: 'error',\r\n        summary: 'Failed',\r\n        detail: 'Failed to toggle maintenance mode',\r\n        life: 3000\r\n      })\r\n    })\r\n  }\r\n\r\n  const reloadApp = () => {\r\n    setLoading(true)\r\n    reloadApplication(app.application.id).then(v => {\r\n      toast.current.show({severity: 'info', summary: 'Success', detail: 'Reloading Application', life: 3000})\r\n      reload && reload()\r\n    }).catch(e => {\r\n      toast.current.show({\r\n        severity: 'error',\r\n        summary: 'Failed',\r\n        detail: `Action Failed: ${e.response.data.error}`,\r\n        life: 3000\r\n      })\r\n    }).finally(() => setLoading(false))\r\n  }\r\n\r\n  const shutdownApp = () => {\r\n    shutdownApplication(app.application.id).then(v => {\r\n      toast.current.show({severity: 'info', summary: 'Success', detail: 'Shutting down Application', life: 3000})\r\n      reload && reload()\r\n    }).catch(e => {\r\n      toast.current.show({\r\n        severity: 'error',\r\n        summary: 'Failed',\r\n        detail: `Action Failed: ${e.response.data.error}`,\r\n        life: 3000\r\n      })\r\n    })\r\n  }\r\n\r\n  const startApp = () => {\r\n    startupApplication(app.application.id).then(v => {\r\n      toast.current.show({severity: 'info', summary: 'Success', detail: 'Starting Application', life: 3000})\r\n      reload && reload()\r\n    }).catch(e => {\r\n      toast.current.show({\r\n        severity: 'error',\r\n        summary: 'Failed',\r\n        detail: `Action Failed: ${e.response.data.error}`,\r\n        life: 3000\r\n      })\r\n    })\r\n  }\r\n\r\n  const deleteApp = () => {\r\n    deleteApplication(app.application.id).then(v => {\r\n      toast.current.show({severity: 'info', summary: 'Success', detail: 'Deleting Application', life: 3000})\r\n      reload && reload()\r\n    }).catch(e => {\r\n      toast.current.show({\r\n        severity: 'error',\r\n        summary: 'Failed',\r\n        detail: `Action Failed: ${e.response.data.error}`,\r\n        life: 3000\r\n      })\r\n    })\r\n  }\r\n\r\n  const lastLog = app.application.status_log && app.application.status_log[0]\r\n  const colorway = {\r\n    booting: \"warn\",\r\n    running: \"info\",\r\n    failed: \"error\",\r\n    crashed: \"error\",\r\n    shutdown: \"warn\",\r\n    unknown: \"\",\r\n  }\r\n\r\n  const menu_log_stdout = useRef(null);\r\n  const menu_log_stderr = useRef(null);\r\n\r\n  const closeModal = () => {\r\n    setLogModal(null)\r\n  }\r\n\r\n  const processStatus = Object.entries(app.processes).map(v => {\r\n    const [key, value] = v\r\n    return {...value, id: key}\r\n  })\r\n\r\n  const renderLogMenuItems = (logType) => Object.values(app.provisions).map(prov => ({\r\n    label: prov.id,\r\n    command: () => {\r\n      setLogModal(<LogDisplayModal close={closeModal} app_id={app.application.id} provision={prov.id}\r\n                                   log_type={logType}/>)\r\n    }\r\n  }))\r\n\r\n  return <div className=\"p-grid\">\r\n    <div className=\"p-col-8\">\r\n      <Toast ref={toast}/>\r\n      <Panel header=\"Information\">\r\n        <div className={\"p-grid\"}>\r\n          <div className={'p-col-6'}>\r\n            <dl>\r\n              <dt>ID</dt>\r\n              <dd>{app.application.id}</dd>\r\n\r\n              <dt>Repository</dt>\r\n              <dd><a target={'_blank'} href={app.application.install_configuration.repository}>\r\n                {app.application.install_configuration.repository}</a>\r\n              </dd>\r\n\r\n              <dt>Branch</dt>\r\n              <dd>{app.application.install_configuration.branch}</dd>\r\n            </dl>\r\n          </div>\r\n          <div className={'p-col-6'}>\r\n            <dl>\r\n              <dt>Bootstrap</dt>\r\n              <dd>{app.application.install_configuration.bootstrap}</dd>\r\n\r\n              <dt>Meta.name</dt>\r\n              <dd>{app.application.meta.name}</dd>\r\n              <dt>Physical Location</dt>\r\n              <dd>{app.application.root_path}</dd>\r\n            </dl>\r\n          </div>\r\n        </div>\r\n      </Panel>\r\n      <Spacer/>\r\n      <Panel header={\"Process Status\"}>\r\n        <DataTable value={processStatus} className=\"p-datatable-sm\">\r\n          <Column field=\"id\" style={{width: '15%', fontWeight: 'bold'}} header=\"Provision\"/>\r\n          <Column header=\"State\"\r\n                  style={{width: '10%'}}\r\n                  body={value => value.alive ? <Tag className=\"p-mr-2\" value=\"Alive\" severity={\"success\"}/> :\r\n                    <Tag className=\"p-mr-2\" value=\"Dead\" severity=\"danger\"/>}\r\n          />\r\n          <Column header=\"Status\" body={data => <code>{data.status}</code>}/>\r\n        </DataTable>\r\n      </Panel>\r\n      <Spacer/>\r\n      <Panel header={\"Events\"}>\r\n        <Timeline value={app.application.status_log} opposite={(item) => item.reason}\r\n                  content={(item) => <small className=\"p-text-secondary\">{new Date(item.at).toGMTString()}</small>}/>\r\n      </Panel>\r\n    </div>\r\n    <div className=\"p-col-4\">\r\n      {\r\n        lastLog &&\r\n        <div className={\"p-fluid\"}>\r\n          <Message severity={colorway[lastLog.flag]} text={lastLog.reason}/>\r\n          <Spacer/>\r\n        </div>\r\n      }\r\n      {\r\n        app.application.maintenance_mode &&\r\n        <div className={\"p-fluid\"}>\r\n          <Message severity=\"warn\" text=\"This application is in maintenance mode\"/>\r\n          <Spacer/>\r\n        </div>\r\n      }\r\n      <Panel header={\"Actions\"}>\r\n        {loading && <ProgressBar mode=\"indeterminate\"/>}\r\n        <Button label=\"Reload\" className=\"p-button-outlined\" onClick={reloadApp}/>\r\n        {\r\n          lastLog && lastLog.flag === \"running\" &&\r\n          <Button label=\"Shutdown\" className=\"p-button-outlined p-button-help\" onClick={shutdownApp}/>\r\n        }\r\n        {\r\n          lastLog && lastLog.flag === \"shutdown\" &&\r\n          <Button label=\"Start\" className=\"p-button-outlined p-button-help\" onClick={startApp}/>\r\n        }\r\n        <Button label=\"Delete\" className=\"p-button-outlined p-button-danger\" onClick={deleteApp}/>\r\n\r\n        <Divider align=\"left\">\r\n          <b>Maintenance Mode</b>\r\n        </Divider>\r\n        {app.application.maintenance_mode ?\r\n          <Button label=\"Go Live\" onClick={holdApp} className=\"p-button-outlined p-button-success\"/> :\r\n          <Button label=\"Hold Application\" onClick={holdApp} className=\"p-button-outlined p-button-warning\"/>\r\n        }\r\n\r\n        <Divider align=\"left\">\r\n          <b>Logs</b>\r\n        </Divider>\r\n        {logModal && logModal}\r\n        <Menu model={renderLogMenuItems(\"log\")} popup ref={menu_log_stdout} id=\"popup_menu\"/>\r\n        <Button label=\"Stdout\" icon=\"pi pi-bars\" onClick={(event) => menu_log_stdout.current.toggle(event)}\r\n                aria-controls=\"popup_menu\" aria-haspopup/>\r\n\r\n        <Menu model={renderLogMenuItems(\"err\")} popup ref={menu_log_stderr} id=\"popup_menu\"/>\r\n        <Button label=\"Stderr\" icon=\"pi pi-bars\" onClick={(event) => menu_log_stderr.current.toggle(event)}\r\n                aria-controls=\"popup_menu\" aria-haspopup/>\r\n      </Panel>\r\n\r\n      <Spacer/>\r\n      <Panel header={\"Last Commit\"}>\r\n        <div style={{whiteSpace: \"pre-line\", fontFamily: \"'IBM Plex mono'\", fontSize: \"0.8em\"}}>\r\n          {app.last_commit}\r\n        </div>\r\n      </Panel>\r\n      <Spacer/>\r\n\r\n    </div>\r\n  </div>;\r\n}","/*\r\n * Copyright (c) 2021 @nokusukun.\r\n * This file is part of Kerfuffle which is released under Apache.\r\n * See file LICENSE or go to https://github.com/nokusukun/kerfuffle/blob/master/LICENSE for full license details.\r\n */\r\n\r\nimport {useParams} from \"react-router-dom\";\r\nimport {useEffect, useRef, useState} from \"react\";\r\nimport {getApplication} from \"../../api/kerfuffle\";\r\nimport {Messages} from \"primereact/messages\";\r\nimport {BreadCrumb} from \"primereact/breadcrumb\";\r\n\r\nimport './application.scss';\r\nimport {TabPanel, TabView} from \"primereact/tabview\";\r\nimport {ProgressBar} from \"primereact/progressbar\";\r\nimport {CloudflarePanel, MessageContent, OverviewPanel, ProvisionsPanel, ProxiesPanel} from \"./panels\";\r\n\r\n\r\nexport const Application = () => {\r\n  let { appId } = useParams();\r\n  const [app, setApp] = useState();\r\n  const [loading, setLoading] = useState(false);\r\n  const [nonce, setNonce] = useState();\r\n  const messageRef = useRef(null);\r\n\r\n  const [breadItems, setBreadItems] = useState([\r\n    {label: 'Loading...'}\r\n  ]);\r\n  const home = { icon: 'pi pi-cog', url: '/console' }\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    const interv = setInterval(function pulldata() {\r\n      getApplication(appId).then(\r\n        app => {\r\n          setApp(app)\r\n          setBreadItems([{label: app.application.id}])\r\n        }\r\n      ).catch( e => {\r\n        if (!messageRef.current) {\r\n          return\r\n        }\r\n        messageRef.current.show({\r\n          severity: 'error',\r\n          sticky: true,\r\n          content: <MessageContent header={\"Failed to load\"} data={e.response.data.error} />})\r\n      }).finally(() => setLoading(false))\r\n      return pulldata\r\n    }(), 5000)\r\n\r\n    return () => clearInterval(interv)\r\n  }, [appId, nonce])\r\n\r\n  const reload = () => {\r\n    setNonce(Math.random())\r\n  }\r\n\r\n  return (\r\n    <div className={\"app-view-panel\"}>\r\n      <BreadCrumb model={breadItems} home={home}/>\r\n      <div className=\"p-field p-fluid\">\r\n        <Messages ref={messageRef}/>\r\n      </div>\r\n      { loading &&\r\n      <div className={\"p-field pi-fluid fl-center\"}>\r\n        <ProgressBar mode=\"indeterminate\" />\r\n      </div>\r\n      }\r\n      {\r\n        app &&\r\n        <TabView>\r\n          <TabPanel header=\"Overview\">\r\n            <OverviewPanel app={app} reload={reload}/>\r\n          </TabPanel>\r\n          <TabPanel header=\"Provisions\">\r\n            <ProvisionsPanel app={app}/>\r\n          </TabPanel>\r\n          <TabPanel header=\"Reverse Proxies\">\r\n            <ProxiesPanel app={app}/>\r\n          </TabPanel>\r\n          <TabPanel header=\"Cloudflare\">\r\n            <CloudflarePanel app={app}/>\r\n          </TabPanel>\r\n        </TabView>\r\n      }\r\n\r\n    </div>\r\n  )\r\n}\r\n","/*\r\n * Copyright (c) 2021 @nokusukun.\r\n * This file is part of Kerfuffle which is released under Apache.\r\n * See file LICENSE or go to https://github.com/nokusukun/kerfuffle/blob/master/LICENSE for full license details.\r\n */\r\n\r\nimport {Link, Route, Switch} from \"react-router-dom\";\r\n\r\nimport {\r\n  DummyKerfuffleApplication,\r\n  DummyKerfuffleApplication_1,\r\n  DummyKerfuffleApplication_2\r\n} from \"../../dummy_data/dummyKerfuffleApplication\";\r\nimport './dashboard.scss';\r\nimport {Button} from \"primereact/button\";\r\nimport {useEffect, useRef, useState} from \"react\";\r\nimport {Dialog} from \"primereact/dialog\";\r\nimport {InputText} from \"primereact/inputtext\";\r\nimport {deployApplication, getApplications} from \"../../api/kerfuffle\";\r\nimport {Messages} from \"primereact/messages\";\r\nimport {Application} from \"../application\";\r\nimport {Card} from \"primereact/card\";\r\nimport {Message} from \"primereact/message\";\r\nimport {Tag} from \"primereact/tag\";\r\n\r\nexport const Dashboard = () => {\r\n  return (\r\n    <>\r\n      <div className={\"header\"}>\r\n        <span className={\"logotype\"}>\\kerfuffle\\</span>\r\n      </div>\r\n      <div className=\"p-d-flex p-jc-center\">\r\n        <Switch>\r\n          <Route path={\"/application/:appId\"}>\r\n            <Application/>\r\n          </Route>\r\n          <Route path={\"/\"}>\r\n            <AppListView/>\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst AppListView = () => {\r\n  const [addRepo, setAddRepo] = useState(false);\r\n  const [applications, setApplications] = useState([]);\r\n  const [error, setError] = useState();\r\n  const [empty, setEmpty] = useState(false);\r\n  const [install, setInstall] = useState({\r\n    repository: \"\",\r\n    branch: \"master\",\r\n    boostrap: \".kerfuffle\"\r\n  });\r\n  const [index, setIndex] = useState()\r\n\r\n  const [installing, setInstalling] = useState(false);\r\n  const messageRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    getApplications().then(v => {\r\n      if (v) {\r\n        setApplications(v)\r\n        setEmpty(false)\r\n      } else {\r\n        setEmpty(true)\r\n      }\r\n    }).catch(err => setError(err))\r\n  }, [index])\r\n\r\n\r\n  const deploy = () => {\r\n    setInstalling(true);\r\n    deployApplication(install).then(r => {\r\n      setAddRepo(false);\r\n      setIndex(Math.random());\r\n    }).catch(e => {\r\n      console.debug(e.response);\r\n      messageRef.current.show(\r\n        { severity: 'error', sticky: true, content: (\r\n            <div className={\"error-message\"}>\r\n              <h4>Failed to deploy</h4>\r\n              <code>\r\n                {e.response.data.error}\r\n              </code>\r\n            </div>\r\n          ) }\r\n      )\r\n    }).finally(() => {\r\n      setInstalling(false);\r\n    })\r\n  }\r\n\r\n  const renderFooter = (closeFunc) => {\r\n    return (\r\n      <div>\r\n        <Button label=\"Cancel\" icon=\"pi pi-times\" onClick={closeFunc} className=\"p-button-text\"/>\r\n        <Button label={installing ? \"Installing...\" : \"Add Repository\"} icon=\"pi pi-check\" onClick={deploy} autoFocus disabled={installing}/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className={\"application-view\"}>\r\n        <div className={\"actions\"}>\r\n          <Button label=\"Add Repository\" className={\"p-button-outlined p-button-help\"}\r\n                  onClick={() => setAddRepo(true)}/>\r\n        </div>\r\n        {empty &&\r\n          <div className={\"responsive p-field p-fluid\"}>\r\n            <Message severity=\"info\" text=\"There's no applications. Click on Add Repository to add one.\"/>\r\n          </div>\r\n        }\r\n        {applications.map(a => <AppViewItem application={a}/>)}\r\n      </div>\r\n\r\n      <Dialog header=\"Add New Repository\" visible={addRepo} className={\"responsive\"}\r\n              footer={renderFooter(() => setAddRepo(false))} onHide={() => setAddRepo(false)}>\r\n        <div className=\"p-field p-fluid\">\r\n          <label htmlFor=\"repoURL\" className=\"p-d-block\">Repository URL <code>*required</code></label>\r\n          <InputText value={install.repository} onInput={(e) => setInstall({...install, repository: e.target.value})} id=\"repoURL\" aria-describedby=\"username1-help\" className=\"p-d-block\"/>\r\n          <small id=\"repoURL-help\" className=\"p-d-block\">URL to clone</small>\r\n        </div>\r\n        <div className=\"p-field p-fluid\">\r\n          <label htmlFor=\"branch\" className=\"p-d-block\">Branch</label>\r\n          <InputText value={install.branch} onInput={(e) => setInstall({...install, branch: e.target.value})} id=\"branch\" aria-describedby=\"username1-help\" className=\"p-d-block\"/>\r\n          <small id=\"branch-help\" className=\"p-d-block\">Branch to checkout after cloning, leave empty to\r\n            use <code>master</code></small>\r\n        </div>\r\n        <div className=\"p-field p-fluid\">\r\n          <label htmlFor=\"bootstrap\" className=\"p-d-block\">Kerfuffle Bootstrap File</label>\r\n          <InputText value={install.boostrap} onInput={(e) => setInstall({...install, bootstrap: e.target.value})} id=\"bootstrap\" aria-describedby=\"username1-help\" className=\"p-d-block\"/>\r\n          <small id=\"bootstrap-help\" className=\"p-d-block\">Bootstrap file to use, leave empty to\r\n            use <code>.kerfuffle</code></small>\r\n        </div>\r\n\r\n        <div className=\"p-field p-fluid\">\r\n          <Messages ref={messageRef}/>\r\n        </div>\r\n\r\n      </Dialog>\r\n    </>\r\n  )\r\n}\r\n\r\nconst AppViewItem = ({application: app}) => {\r\n  const lastLog = app.status_log && app.status_log[0]\r\n  const hasError = lastLog.flag !== \"running\"\r\n\r\n  return (\r\n    <Link to={`/application/${app.id}`}>\r\n      <div className={\"item\"}>\r\n        <div className={\"left-info\"}>\r\n          <i className=\"pi pi-clone icon\"/>\r\n          {\r\n            lastLog.flag === \"running\" && <Tag className=\"p-mr-2\" value=\"Running\"/>\r\n          }\r\n          {\r\n            lastLog.flag !== \"running\" && <Tag className=\"p-mr-2\" value={lastLog.flag}/>\r\n          }\r\n          <span>{app.meta.name || app.id}</span>\r\n          {hasError && (\r\n            <i className=\"pi pi-exclamation-circle icon-error\"/>\r\n          )}\r\n        </div>\r\n        <div className={\"right-info\"}>\r\n          <i className=\"pi pi-link icon-1\"/>\r\n          <span>{app.install_configuration.repository} •&nbsp;</span>\r\n          <span>{app.install_configuration.branch}&nbsp;</span>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n\r\n  )\r\n}","import logo from './logo.svg';\nimport './App.css';\nimport 'primeflex/primeflex.css';\nimport 'primereact/resources/themes/saga-blue/theme.css';\nimport 'primereact/resources/primereact.min.css';\nimport 'primeicons/primeicons.css';\nimport {Dashboard} from \"./pages/dashboard\";\nimport {HashRouter} from \"react-router-dom\";\n\nfunction App() {\n  return (\n    <HashRouter>\n      <div className=\"App\">\n        <Dashboard/>\n      </div>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}