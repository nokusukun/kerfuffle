{"version":3,"sources":["logo.svg","api/kerfuffle.js","pages/application/index.js","pages/dashboard/index.js","App.js","reportWebVitals.js","index.js"],"names":["v1","APIGenerator","handler","get","object","prop","Object","keys","includes","parameter","paths","substr","urls","toString","this","join","param","p","push","Proxy","window","location","host","origin","api","a","axios","application","response","data","id","$application","installData","console","log","post","patch","hold","JSONBlock","style","fontFamily","fontSize","text","JSON","stringify","language","showLineNumbers","theme","github","MessageContent","header","display","flexDirection","Spacer","height","CloudflarePanel","app","cfs","ProxiesPanel","proxies","ProvisionsPanel","values","provisions","map","prov","toUpperCase","OverviewPanel","reload","toast","useRef","holdApp","holdApplication","then","v","current","show","severity","summary","detail","life","catch","e","className","ref","value","disabled","install_configuration","repository","branch","bootstrap","meta","name","processes","status","maintenance_mode","label","align","onClick","whiteSpace","last_commit","Application","appId","useParams","useState","setApp","loading","setLoading","nonce","setNonce","messageRef","breadItems","setBreadItems","useEffect","getApplication","sticky","content","error","finally","model","home","icon","url","Math","random","Dashboard","path","AppListView","addRepo","setAddRepo","applications","setApplications","setError","empty","setEmpty","boostrap","install","setInstall","index","setIndex","installing","setInstalling","getApplications","err","closeFunc","deploy","deployApplication","r","debug","visible","footer","autoFocus","onHide","htmlFor","onInput","target","aria-describedby","AppViewItem","hasError","to","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7ab8a814.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","/*\r\n * Copyright (c) 2021 @nokusukun.\r\n * This file is part of Kerfuffle which is released under Apache.\r\n * See file LICENSE or go to https://github.com/nokusukun/kerfuffle/blob/master/LICENSE for full license details.\r\n */\r\n\r\nimport axios from \"axios\";\r\n\r\nconst API_URL = window.location.host === \"localhost:3000\" ? \"http://localhost:8080\" : window.location.origin\r\nconst v1 = APIGenerator(API_URL).api.v1\r\n\r\nfunction _sleep(ms) {\r\n  return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nexport async function getApplications() {\r\n  const response = await axios.get(v1.application)\r\n  return response.data\r\n}\r\n\r\nexport async function getApplication(id) {\r\n  const response = await axios.get(v1.$application(id))\r\n  return response.data\r\n}\r\n\r\nexport async function deployApplication(installData) {\r\n  console.log(\"Posting\", v1.application, installData)\r\n  const response = await axios.post(v1.application, installData)\r\n  return response.data\r\n}\r\n\r\nexport async function holdApplication(id) {\r\n  const response = await axios.patch(v1.$application(id).hold)\r\n  return response.data\r\n}\r\n\r\n\r\nfunction APIGenerator(...urls) {\r\n  const handler = {\r\n    get: function (object, prop) {\r\n      if (!Object.keys(object).includes(prop)) {\r\n        if (prop[0] === \"$\") {\r\n          return (parameter) => {\r\n            return APIGenerator(...object.paths, prop.substr(1), parameter)\r\n          }\r\n        }\r\n        return APIGenerator(...object.paths, prop)\r\n      }\r\n      return object[prop]\r\n    }\r\n  }\r\n  const paths = {\r\n    paths: urls,\r\n    toString: function () {\r\n      return this.paths.join(\"/\")\r\n    },\r\n    param: function (p) {\r\n      this.paths.push(p)\r\n      return this\r\n    }\r\n  }\r\n\r\n  return new Proxy(paths, handler)\r\n}\r\n","/*\r\n * Copyright (c) 2021 @nokusukun.\r\n * This file is part of Kerfuffle which is released under Apache.\r\n * See file LICENSE or go to https://github.com/nokusukun/kerfuffle/blob/master/LICENSE for full license details.\r\n */\r\n\r\nimport { useParams } from \"react-router-dom\";\r\nimport {useEffect, useRef, useState} from \"react\";\r\nimport {getApplication, holdApplication} from \"../../api/kerfuffle\";\r\nimport {Messages} from \"primereact/messages\";\r\nimport {BreadCrumb} from \"primereact/breadcrumb\";\r\n\r\nimport './application.scss';\r\nimport {TabPanel, TabView} from \"primereact/tabview\";\r\nimport {Panel} from \"primereact/panel\";\r\nimport {InputText} from \"primereact/inputtext\";\r\nimport {Button} from \"primereact/button\";\r\nimport {CodeBlock, github} from \"react-code-blocks\";\r\nimport {Message} from \"primereact/message\";\r\nimport {Divider} from \"primereact/divider\";\r\nimport {Toast} from \"primereact/toast\";\r\n\r\nconst JSONBlock = ({ object }) => {\r\n  return (\r\n      <div style={{fontFamily: \"'IBM Plex Mono'\", fontSize: \"0.8em\"}}>\r\n        <CodeBlock\r\n            text={ JSON.stringify(object, null, 2)}\r\n            language={\"json\"}\r\n            showLineNumbers={false}\r\n            theme={github}\r\n        />\r\n      </div>\r\n  );\r\n}\r\n\r\n\r\nconst MessageContent = ({header, data}) => {\r\n  return (\r\n    <div style={{display: 'flex', flexDirection: 'column'}}>\r\n      <h4>{header}</h4>\r\n      <p>\r\n        <code>\r\n          {data}\r\n        </code>\r\n      </p>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nconst Spacer = ({height}) => {\r\n  return (<div style={{height: height || \"1em\"}}/>)\r\n}\r\n\r\n\r\nfunction CloudflarePanel({app}) {\r\n\r\n  return <div>\r\n    <JSONBlock object={app.cfs}/>\r\n  </div>\r\n}\r\n\r\n\r\nfunction ProxiesPanel({app}) {\r\n\r\n  return <div>\r\n    <JSONBlock object={app.proxies}/>\r\n  </div>\r\n}\r\n\r\n\r\nfunction ProvisionsPanel({app}) {\r\n\r\n  return <div>\r\n    {Object.values(app.provisions).map(prov =>\r\n      <>\r\n        <Spacer height={\"1em\"}/>\r\n        <Panel header={prov.id.toString().toUpperCase()}>\r\n          <JSONBlock object={prov}/>\r\n        </Panel>\r\n      </>\r\n    )}\r\n  </div>\r\n}\r\n\r\nfunction OverviewPanel({app, reload}) {\r\n  const toast = useRef(null);\r\n\r\n  const holdApp = () => {\r\n    holdApplication(app.application.id).then(v => {\r\n      toast.current.show({severity:'info', summary:'Success', detail:'Toggled maintenance mode', life: 3000})\r\n      reload && reload()\r\n    }).catch(e => {\r\n      toast.current.show({severity:'error', summary:'Failed', detail:'Failed to toggle maintenance mode', life: 3000})\r\n    })\r\n  }\r\n\r\n  return <div className=\"p-grid\">\r\n    <div className=\"p-col-8\">\r\n      <Toast ref={toast} />\r\n      <Panel header=\"Information\">\r\n        <div className=\"p-field p-fluid\">\r\n          <label className=\"p-d-block\"><b>ID</b></label>\r\n          <InputText value={app.application.id} disabled className=\"p-d-block\"/>\r\n          <Spacer height={\"0.8em\"}/>\r\n          <label className=\"p-d-block\"><b>Repository</b></label>\r\n          <InputText value={app.application.install_configuration.repository} disabled className=\"p-d-block\"/>\r\n          <Spacer height={\"0.8em\"}/>\r\n          <label className=\"p-d-block\"><b>Branch</b></label>\r\n          <InputText value={app.application.install_configuration.branch} disabled className=\"p-d-block\"/>\r\n          <Spacer height={\"0.8em\"}/>\r\n          <label className=\"p-d-block\"><b>Bootstrap</b></label>\r\n          <InputText value={app.application.install_configuration.bootstrap} disabled className=\"p-d-block\"/>\r\n          <Spacer height={\"0.8em\"}/>\r\n          <label className=\"p-d-block\"><b>Meta.name</b></label>\r\n          <InputText value={app.application.meta.name} disabled className=\"p-d-block\"/>\r\n        </div>\r\n      </Panel>\r\n      <Spacer />\r\n      <Panel header={\"Provision Status\"}>\r\n        <JSONBlock object={app.processes}/>\r\n      </Panel>\r\n\r\n    </div>\r\n    <div className=\"p-col-4\">\r\n      {\r\n        app.application.status === \"running\" &&\r\n        <div className={\"p-fluid\"}>\r\n          <Message severity=\"info\" text=\"This application is running\" />\r\n          <Spacer/>\r\n        </div>\r\n      }\r\n      {\r\n        app.application.maintenance_mode &&\r\n        <div className={\"p-fluid\"}>\r\n          <Message severity=\"warn\" text=\"This application is in maintenance mode\" />\r\n          <Spacer/>\r\n        </div>\r\n      }\r\n      <Panel header={\"Actions\"}>\r\n        <Button label=\"Reload\" className=\"p-button-outlined\" />\r\n        <Button label=\"Shutdown\" className=\"p-button-outlined p-button-help\" />\r\n        <Button label=\"Delete\" className=\"p-button-outlined p-button-danger\" />\r\n\r\n        <Divider align=\"left\" >\r\n          <b>Maintenance Mode</b>\r\n        </Divider>\r\n        {app.application.maintenance_mode ?\r\n            <Button label=\"Go Live\" onClick={holdApp} className=\"p-button-outlined p-button-success\" /> :\r\n            <Button label=\"Hold Application\" onClick={holdApp} className=\"p-button-outlined p-button-warning\" />\r\n        }\r\n      </Panel>\r\n      <Spacer/>\r\n      <Panel header={\"Last Commit\"}>\r\n        <div style={{whiteSpace: \"pre-line\", fontFamily: \"'IBM Plex mono'\", fontSize: \"0.8em\"}}>\r\n          {app.last_commit}\r\n        </div>\r\n      </Panel>\r\n\r\n    </div>\r\n  </div>;\r\n}\r\n\r\nexport const Application = () => {\r\n  let { appId } = useParams();\r\n  const [app, setApp] = useState();\r\n  const [loading, setLoading] = useState(false);\r\n  const [nonce, setNonce] = useState();\r\n  const messageRef = useRef(null);\r\n\r\n  const [breadItems, setBreadItems] = useState([\r\n    {label: 'Loading...'}\r\n  ]);\r\n  const home = { icon: 'pi pi-cog', url: '/' }\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    getApplication(appId).then(\r\n      app => {\r\n        setApp(app)\r\n        setBreadItems(\r\n          [\r\n            {label: app.application.id}\r\n          ]\r\n        )\r\n      }\r\n    ).catch( e => {\r\n        messageRef.current.show({\r\n          severity: 'error',\r\n          sticky: true,\r\n          content: <MessageContent header={\"Failed to load\"} data={e.response.data.error} />})\r\n      }\r\n    ).finally(() => setLoading(false))\r\n  }, [appId, nonce])\r\n\r\n  const reload = () => {\r\n    setNonce(Math.random())\r\n  }\r\n\r\n  return (\r\n    <div className={\"app-view-panel\"}>\r\n      <BreadCrumb model={breadItems} home={home}/>\r\n      <div className=\"p-field p-fluid\">\r\n        <Messages ref={messageRef}/>\r\n      </div>\r\n      { loading &&\r\n      <div className={\"p-field pi-fluid fl-center\"}>\r\n        <i className=\"pi pi-spin pi-spinner\" style={{'fontSize': '2em'}}/>\r\n      </div>\r\n      }\r\n      {\r\n        app &&\r\n        <TabView>\r\n          <TabPanel header=\"Overview\">\r\n            <OverviewPanel app={app} reload={reload}/>\r\n          </TabPanel>\r\n          <TabPanel header=\"Provisions\">\r\n            <ProvisionsPanel app={app}/>\r\n          </TabPanel>\r\n          <TabPanel header=\"Reverse Proxies\">\r\n            <ProxiesPanel app={app}/>\r\n          </TabPanel>\r\n          <TabPanel header=\"Cloudflare\">\r\n            <CloudflarePanel app={app}/>\r\n          </TabPanel>\r\n        </TabView>\r\n      }\r\n\r\n    </div>\r\n  )\r\n}\r\n","/*\r\n * Copyright (c) 2021 @nokusukun.\r\n * This file is part of Kerfuffle which is released under Apache.\r\n * See file LICENSE or go to https://github.com/nokusukun/kerfuffle/blob/master/LICENSE for full license details.\r\n */\r\n\r\nimport {Link, Route, Switch} from \"react-router-dom\";\r\n\r\nimport {\r\n  DummyKerfuffleApplication,\r\n  DummyKerfuffleApplication_1,\r\n  DummyKerfuffleApplication_2\r\n} from \"../../dummy_data/dummyKerfuffleApplication\";\r\nimport './dashboard.scss';\r\nimport {Button} from \"primereact/button\";\r\nimport {useEffect, useRef, useState} from \"react\";\r\nimport {Dialog} from \"primereact/dialog\";\r\nimport {InputText} from \"primereact/inputtext\";\r\nimport {deployApplication, getApplications} from \"../../api/kerfuffle\";\r\nimport {Messages} from \"primereact/messages\";\r\nimport {Application} from \"../application\";\r\nimport {Card} from \"primereact/card\";\r\nimport {Message} from \"primereact/message\";\r\nimport {Tag} from \"primereact/tag\";\r\n\r\nexport const Dashboard = () => {\r\n  return (\r\n    <>\r\n      <div className={\"header\"}>\r\n        <span className={\"logotype\"}>\\kerfuffle\\</span>\r\n      </div>\r\n      <div className=\"p-d-flex p-jc-center\">\r\n        <Switch>\r\n          <Route path={\"/application/:appId\"}>\r\n            <Application/>\r\n          </Route>\r\n          <Route path={\"/\"}>\r\n            <AppListView/>\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst AppListView = () => {\r\n  const [addRepo, setAddRepo] = useState(false);\r\n  const [applications, setApplications] = useState([]);\r\n  const [error, setError] = useState();\r\n  const [empty, setEmpty] = useState(false);\r\n  const [install, setInstall] = useState({\r\n    repository: \"\",\r\n    branch: \"master\",\r\n    boostrap: \".kerfuffle\"\r\n  });\r\n  const [index, setIndex] = useState()\r\n\r\n  const [installing, setInstalling] = useState(false);\r\n  const messageRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    getApplications().then(v => {\r\n      if (v) {\r\n        setApplications(v)\r\n        setEmpty(false)\r\n      } else {\r\n        setEmpty(true)\r\n      }\r\n    }).catch(err => setError(err))\r\n  }, [index])\r\n\r\n\r\n  const deploy = () => {\r\n    setInstalling(true);\r\n    deployApplication(install).then(r => {\r\n      setAddRepo(false);\r\n      setIndex(Math.random());\r\n    }).catch(e => {\r\n      console.debug(e.response);\r\n      messageRef.current.show(\r\n        { severity: 'error', sticky: true, content: (\r\n            <div className={\"error-message\"}>\r\n              <h4>Failed to deploy</h4>\r\n              <code>\r\n                {e.response.data.error}\r\n              </code>\r\n            </div>\r\n          ) }\r\n      )\r\n    }).finally(() => {\r\n      setInstalling(false);\r\n    })\r\n  }\r\n\r\n  const renderFooter = (closeFunc) => {\r\n    return (\r\n      <div>\r\n        <Button label=\"Cancel\" icon=\"pi pi-times\" onClick={closeFunc} className=\"p-button-text\"/>\r\n        <Button label={installing ? \"Installing...\" : \"Add Repository\"} icon=\"pi pi-check\" onClick={deploy} autoFocus disabled={installing}/>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className={\"application-view\"}>\r\n        <div className={\"actions\"}>\r\n          <Button label=\"Add Repository\" className={\"p-button-outlined p-button-help\"}\r\n                  onClick={() => setAddRepo(true)}/>\r\n        </div>\r\n        {empty &&\r\n          <div className={\"responsive p-field p-fluid\"}>\r\n            <Message severity=\"info\" text=\"There's no applications. Click on Add Repository to add one.\"/>\r\n          </div>\r\n        }\r\n        {applications.map(a => <AppViewItem application={a}/>)}\r\n      </div>\r\n\r\n      <Dialog header=\"Add New Repository\" visible={addRepo} className={\"responsive\"}\r\n              footer={renderFooter(() => setAddRepo(false))} onHide={() => setAddRepo(false)}>\r\n        <div className=\"p-field p-fluid\">\r\n          <label htmlFor=\"repoURL\" className=\"p-d-block\">Repository URL <code>*required</code></label>\r\n          <InputText value={install.repository} onInput={(e) => setInstall({...install, repository: e.target.value})} id=\"repoURL\" aria-describedby=\"username1-help\" className=\"p-d-block\"/>\r\n          <small id=\"repoURL-help\" className=\"p-d-block\">URL to clone</small>\r\n        </div>\r\n        <div className=\"p-field p-fluid\">\r\n          <label htmlFor=\"branch\" className=\"p-d-block\">Branch</label>\r\n          <InputText value={install.branch} onInput={(e) => setInstall({...install, branch: e.target.value})} id=\"branch\" aria-describedby=\"username1-help\" className=\"p-d-block\"/>\r\n          <small id=\"branch-help\" className=\"p-d-block\">Branch to checkout after cloning, leave empty to\r\n            use <code>master</code></small>\r\n        </div>\r\n        <div className=\"p-field p-fluid\">\r\n          <label htmlFor=\"bootstrap\" className=\"p-d-block\">Kerfuffle Bootstrap File</label>\r\n          <InputText value={install.boostrap} onInput={(e) => setInstall({...install, bootstrap: e.target.value})} id=\"bootstrap\" aria-describedby=\"username1-help\" className=\"p-d-block\"/>\r\n          <small id=\"bootstrap-help\" className=\"p-d-block\">Bootstrap file to use, leave empty to\r\n            use <code>.kerfuffle</code></small>\r\n        </div>\r\n\r\n        <div className=\"p-field p-fluid\">\r\n          <Messages ref={messageRef}/>\r\n        </div>\r\n\r\n      </Dialog>\r\n    </>\r\n  )\r\n}\r\n\r\nconst AppViewItem = ({application: app}) => {\r\n  const hasError = app.status !== \"running\"\r\n\r\n  return (\r\n    <Link to={`/application/${app.id}`}>\r\n      <div className={\"item\"}>\r\n        <div className={\"left-info\"}>\r\n          <i className=\"pi pi-clone icon\"/>\r\n          {\r\n            app.status === \"running\" && <Tag className=\"p-mr-2\" value=\"Running\"/>\r\n          }\r\n          {\r\n            app.status !== \"running\" && <Tag className=\"p-mr-2\" value={app.status}/>\r\n          }\r\n          <span>{app.meta.name || app.id}</span>\r\n          {hasError && (\r\n            <i className=\"pi pi-exclamation-circle icon-error\"/>\r\n          )}\r\n        </div>\r\n        <div className={\"right-info\"}>\r\n          <i className=\"pi pi-link icon-1\"/>\r\n          <span>{app.install_configuration.repository} â€¢&nbsp;</span>\r\n          <span>{app.install_configuration.branch}&nbsp;</span>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n\r\n  )\r\n}","import logo from './logo.svg';\nimport './App.css';\nimport 'primeflex/primeflex.css';\nimport 'primereact/resources/themes/saga-blue/theme.css';\nimport 'primereact/resources/primereact.min.css';\nimport 'primeicons/primeicons.css';\nimport {Dashboard} from \"./pages/dashboard\";\nimport {HashRouter} from \"react-router-dom\";\n\nfunction App() {\n  return (\n    <HashRouter>\n      <div className=\"App\">\n        <Dashboard/>\n      </div>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}